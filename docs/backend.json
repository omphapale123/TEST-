
{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user within the OffshoreBrucke application. This entity holds profile information for all user roles (buyer, supplier, admin).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity, matching the Firebase Auth UID."
        },
        "email": {
          "type": "string",
          "description": "Email address of the user.",
          "format": "email"
        },
        "country": {
          "type": "string",
          "description": "Country of origin for the user (e.g., Germany or India)."
        },
        "role": {
          "type": "string",
          "description": "Role of the user, used for authorization.",
          "enum": ["buyer", "supplier", "admin"]
        },
        "fullName": {
            "type": "string",
            "description": "The user's full name."
        },
        "companyName": {
            "type": "string",
            "description": "The user's company name."
        },
        "contactNumber": {
            "type": "string",
            "description": "The user's contact phone number."
        },
        "verificationStatus": {
            "type": "string",
            "description": "The status of the user's document verification.",
            "enum": ["unverified", "pending", "verified"]
        },
        "hrbNumber": {
            "type": "string",
            "description": "The user's HRA/HRB number (for German buyers)."
        },
        "gstNumber": {
            "type": "string",
            "description": "The supplier's GST number (for Indian suppliers)."
        },
        "panNumber": {
            "type": "string",
            "description": "The supplier's PAN number (for Indian suppliers)."
        },
        "udyamNumber": {
            "type": "string",
            "description": "The supplier's Udyam registration number (for Indian suppliers)."
        },
        "isoCertificate": {
            "type": "string",
            "description": "Path or URL to the supplier's ISO certificate document."
        },
        "tuvCertificate": {
            "type": "string",
            "description": "Path or URL to the supplier's TUV certificate document."
        },
        "companyDescription": {
            "type": "string",
            "description": "A detailed description of the supplier's company."
        },
        "specializedCategories": {
            "type": "array",
            "description": "A list of product categories the supplier specializes in.",
            "items": {
                "type": "string"
            }
        }
      },
      "required": [
        "id",
        "email",
        "country",
        "role",
        "fullName",
        "companyName",
        "verificationStatus"
      ]
    },
    "Requirement": {
      "title": "Requirement",
      "type": "object",
      "description": "Represents a product requirement created by a buyer.",
      "properties": {
        "buyerId": {
          "type": "string",
          "description": "The UID of the buyer who created the requirement."
        },
        "title": {
          "type": "string",
          "description": "The title of the requirement."
        },
        "productCategory": {
          "type": "string",
          "description": "The category of the product."
        },
        "quantity": {
          "type": "number",
          "description": "The desired quantity of the product."
        },
        "targetPrice": {
          "type": "number",
          "description": "The target price for the product."
        },
        "destinationCountry": {
          "type": "string",
          "description": "The destination country for the shipment."
        },
        "description": {
          "type": "string",
          "description": "A detailed description of the requirement."
        },
        "status": {
          "type": "string",
          "enum": [
            "draft",
            "submitted"
          ]
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": [
        "buyerId",
        "title",
        "productCategory",
        "quantity",
        "targetPrice",
        "destinationCountry",
        "description",
        "status",
        "createdAt"
      ]
    },
    "Chat": {
        "title": "Chat",
        "type": "object",
        "description": "Represents a chat session between a buyer and a supplier.",
        "properties": {
            "requirementId": {
                "type": "string",
                "description": "The ID of the requirement this chat is about."
            },
            "buyerId": {
                "type": "string",
                "description": "The UID of the buyer in the chat."
            },
            "supplierId": {
                "type": "string",
                "description": "The UID of the supplier in the chat."
            },
            "participants": {
                "type": "array",
                "description": "An array containing the UIDs of both the buyer and the supplier.",
                "items": { "type": "string" }
            },
            "createdAt": {
                "type": "string",
                "format": "date-time"
            },
            "lastMessage": {
                "type": "string",
                "description": "The text of the last message sent in the chat, for display in chat lists."
            },
            "lastUpdatedAt": {
                "type": "string",
                "format": "date-time",
                "description": "Timestamp of the last message to enable sorting."
            },
            "supplierName": {
                "type": "string",
                "description": "The name of the supplier company for display purposes."
            },
            "buyerName": {
                "type": "string",
                "description": "The name of the buyer company for display purposes."
            },
            "requirementTitle": {
                "type": "string",
                "description": "The title of the requirement for display purposes."
            }
        },
        "required": ["requirementId", "buyerId", "supplierId", "participants", "createdAt"]
    },
    "Message": {
        "title": "Message",
        "type": "object",
        "description": "Represents a single message within a chat.",
        "properties": {
            "senderId": {
                "type": "string",
                "description": "The UID of the user who sent the message."
            },
            "text": {
                "type": "string",
                "description": "The content of the message."
            },
            "createdAt": {
                "type": "string",
                "format": "date-time"
            }
        },
        "required": ["senderId", "text", "createdAt"]
    },
    "Category": {
      "title": "Category",
      "type": "object",
      "description": "Represents a product category.",
      "properties": {
        "name": {
          "type": "string",
          "description": "A unique, URL-friendly identifier for the category (e.g., 'industrial_machinery')."
        },
        "label": {
          "type": "string",
          "description": "A human-readable label for the category (e.g., 'Industrial Machinery')."
        },
        "active": {
            "type": "boolean",
            "description": "Whether the category is currently active and can be selected."
        }
      },
      "required": ["name", "label", "active"]
    },
    "ContactSubmission": {
        "title": "Contact Submission",
        "type": "object",
        "description": "Represents a contact form submission from a user.",
        "properties": {
            "name": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "contactNumber": { "type": "string" },
            "subject": { "type": "string" },
            "message": { "type": "string" },
            "userId": { "type": "string" },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["name", "email", "subject", "message"]
    },
    "Trade": {
      "title": "Trade",
      "type": "object",
      "description": "Represents a finalized trade between a buyer and a supplier.",
      "properties": {
        "buyerId": { "type": "string" },
        "supplierId": { "type": "string" },
        "requirementId": { "type": "string" },
        "requirementTitle": { "type": "string" },
        "buyerName": { "type": "string" },
        "supplierName": { "type": "string" },
        "value": { "type": "number" },
        "status": {
          "type": "string",
          "enum": ["Ongoing", "Pending", "Finished", "Dispatched", "Delivered"]
        },
        "initiated": { "type": "string", "format": "date-time" },
        "invoiceStatus": {
            "type": "string",
            "enum": ["pending", "submitted", "approved"]
        },
        "shippingDocsStatus": {
            "type": "string",
            "enum": ["pending", "submitted"]
        },
        "shippingInfo": {
            "type": "object",
            "properties": {
                "trackingId": { "type": "string" },
                "carrier": { "type": "string" }
            }
        },
        "processedForCommission": {
            "type": "boolean"
        }
      },
      "required": [
        "buyerId",
        "supplierId",
        "requirementId",
        "buyerName",
        "supplierName",
        "value",
        "status",
        "initiated"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ],
    "claims": {
        "role": {
            "type": "string",
            "enum": ["buyer", "supplier", "admin"]
        }
    }
  },
  "firestore": {
    "/users/{userId}": {
      "schema": {
        "$ref": "#/entities/User"
      },
      "description": "Stores user profile data. The 'role' field within the user document is used for authorization."
    },
    "/requirements/{requirementId}": {
      "schema": {
        "$ref": "#/entities/Requirement"
      },
      "description": "Stores buyer product requirements."
    },
    "/chats/{chatId}": {
        "schema": {
            "$ref": "#/entities/Chat"
        },
        "description": "Stores metadata for a single chat session."
    },
    "/chats/{chatId}/messages/{messageId}": {
        "schema": {
            "$ref": "#/entities/Message"
        },
        "description": "Stores all messages within a specific chat."
    },
    "/categories/{categoryId}": {
        "schema": {
            "$ref": "#/entities/Category"
        },
        "description": "Stores product categories for requirements."
    },
    "/contactSubmissions/{submissionId}": {
        "schema": {
            "$ref": "#/entities/ContactSubmission"
        },
        "description": "Stores messages sent via the contact form."
    },
    "/trades/{tradeId}": {
        "schema": {
            "$ref": "#/entities/Trade"
        },
        "description": "Stores finalized trades for tracking and revenue calculation."
    }
  }
}
